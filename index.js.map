{"version":3,"file":"index.js","sources":["../src/artist-api.js","../src/create.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst imagesOnPage = 8;\n\nexport async function getArtists(page = 1, name = '') {\n  const BASE_URL = 'https://sound-wave.b.goit.study/api/artists';\n  const params = {\n    limit: imagesOnPage,\n    page,\n  };\n  if (name) {\n    params.name = name;\n  }\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    iziToast.warning({\n      message: `Request error: ${error.message}`,\n      position: 'center',\n    });\n    throw error;\n  }\n}\n","const photo = '/img/artists/file-not-found.jpg';\n\nexport function createArtistsMarkup(arr) {\n  return arr\n    .map(({ strArtist, strBiographyEN, strArtistThumb, _id, genres }) => {\n      const flattenedGenres = genres.flatMap(genre => genre.split('/')).map(g => g.trim());\n      const uniqueGenres = [...new Set(flattenedGenres)];\n      const genresMarkup = uniqueGenres\n        .map(genre => `<span class=\"artists-genre\">${genre}</span>`)\n        .join('');\n\n      return `\n        <li class=\"artists-item\" style=\"max-width:472px; max-height:527px;\">\n          <div class=\"artists-box-img\">\n            <img\n              data-id=\"${_id}\"\n              src=\"${strArtistThumb || photo}\"\n              alt=\"${strArtist}\"\n              class=\"artists-img\"\n              loading=\"lazy\"\n              width=\"472\"\n              height=\"300\"\n            />\n          </div>\n          <div class=\"artists-box-genres\">${genresMarkup}</div>\n          <div class=\"artists-content\">\n            <h4 class=\"artists-name\">${strArtist}</h4>\n            <p class=\"artists-descr\">${strBiographyEN}</p>\n            <button type=\"button\" class=\"artists-learn-more-btn\" aria-label=\"Learn more about ${strArtist}\">\n              Learn More\n              <svg class=\"icon-caret-right\" width=\"24\" height=\"24\">\n                <use href=\"/artists-hub/assets/sprite-c2qr3u0C.svg#icon-caret-right\"></use>\n              </svg>\n            </button>\n          </div>\n        </li>\n      `;\n    })\n    .join('');\n}","import './css/styles.css';\nimport { getArtists } from './artist-api.js';\nimport { createArtistsMarkup } from './create.js';\n\nconst list = document.querySelector('.artists-list');\nconst pagination = document.querySelector('.pagination');\nconst searchInput = document.querySelector('#search-input');\nconst searchBtn = document.querySelector('#search-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nasync function loadArtists(page = 1, query = '') {\n  try {\n    const { artists, totalArtists } = await getArtists(page, query);\n    list.innerHTML = createArtistsMarkup(artists);\n\n    const totalPages = Math.ceil(totalArtists / 8);\n    renderPagination(totalPages, page);\n  } catch (err) {\n    list.innerHTML = `<li>Ошибка загрузки данных</li>`;\n  }\n}\n\nfunction renderPagination(totalPages, current) {\n  pagination.innerHTML = '';\n  if (totalPages <= 1) return;\n\n  const addButton = (label, page, isActive = false, isDisabled = false) => {\n    const btn = document.createElement('button');\n    btn.textContent = label;\n    if (isActive) btn.classList.add('active');\n    if (isDisabled) btn.disabled = true;\n    btn.addEventListener('click', () => {\n      if (page < 1 || page > totalPages) return; // защита от невалидных страниц\n      currentPage = page;\n      loadArtists(currentPage, currentQuery);\n    });\n    pagination.appendChild(btn);\n  };\n\n  // Кнопка \"←\"\n  addButton('←', current - 1, false, current === 1);\n\n  // Логика показа номеров страниц с \"...\"\n  if (totalPages <= 5) {\n    // Если всего 5 или меньше страниц — показать все\n    for (let i = 1; i <= totalPages; i++) {\n      addButton(i, i, i === current);\n    }\n  } else {\n    // Иначе — показываем 1, 2, 3 ... last\n    if (current <= 3) {\n      // Показываем 1 2 3 ... N\n      for (let i = 1; i <= 3; i++) {\n        addButton(i, i, i === current);\n      }\n      const dots = document.createElement('span');\n      dots.textContent = '...';\n      pagination.appendChild(dots);\n      addButton(totalPages, totalPages, current === totalPages);\n    } else if (current >= totalPages - 2) {\n      // Показываем 1 ... N-2 N-1 N\n      addButton(1, 1, current === 1);\n      const dots = document.createElement('span');\n      dots.textContent = '...';\n      pagination.appendChild(dots);\n      for (let i = totalPages - 2; i <= totalPages; i++) {\n        addButton(i, i, i === current);\n      }\n    } else {\n      // Показываем 1 ... current ... N\n      addButton(1, 1, false);\n      const dots1 = document.createElement('span');\n      dots1.textContent = '...';\n      pagination.appendChild(dots1);\n\n      addButton(current - 1, current - 1, false);\n      addButton(current, current, true);\n      addButton(current + 1, current + 1, false);\n\n      const dots2 = document.createElement('span');\n      dots2.textContent = '...';\n      pagination.appendChild(dots2);\n\n      addButton(totalPages, totalPages, false);\n    }\n  }\n\n  // Кнопка \"→\"\n  addButton('→', current + 1, false, current === totalPages);\n}\n\n// Обработчик кнопки поиска\nsearchBtn.addEventListener('click', () => {\n  currentQuery = searchInput.value.trim();\n  currentPage = 1;\n  loadArtists(currentPage, currentQuery);\n});\n\n// Также поиск по вводу (если хочешь)\nsearchInput.addEventListener('input', (e) => {\n  currentQuery = e.target.value.trim();\n  currentPage = 1;\n  loadArtists(currentPage, currentQuery);\n});\n\n// Инициализация\nloadArtists(currentPage, currentQuery);\n"],"names":["imagesOnPage","getArtists","page","name","BASE_URL","params","axios","error","iziToast","photo","createArtistsMarkup","arr","strArtist","strBiographyEN","strArtistThumb","_id","genres","flattenedGenres","genre","g","genresMarkup","list","pagination","searchInput","searchBtn","currentPage","currentQuery","loadArtists","query","artists","totalArtists","totalPages","renderPagination","current","addButton","label","isActive","isDisabled","btn","i","dots","dots1","dots2","e"],"mappings":"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"}