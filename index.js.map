{"version":3,"file":"index.js","sources":["../src/artist-api.js","../src/create.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst imagesOnPage = 8;\n\nexport async function getArtists(page = 1, name = '') {\n  const BASE_URL = 'https://sound-wave.b.goit.study/api/artists';\n  const params = {\n    limit: imagesOnPage,\n    page,\n  };\n  if (name) {\n    params.name = name;\n  }\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    iziToast.warning({\n      message: `Request error: ${error.message}`,\n      position: 'center',\n    });\n    throw error;\n  }\n}\n","const photo = 'https://cdn.acowebs.com/wp-content/uploads/2023/10/3acwebs-1-768x442.jpg';\n\nexport function createArtistsMarkup(arr) {\n  return arr\n    .map(({ strArtist, strBiographyEN, strArtistThumb, _id, genres }) => {\n      const flattenedGenres = genres.flatMap(genre => genre.split('/')).map(g => g.trim());\n      const uniqueGenres = [...new Set(flattenedGenres)];\n      const genresMarkup = uniqueGenres\n        .map(genre => `<span class=\"artists-genre\">${genre}</span>`)\n        .join('');\n\n      // Ограничиваем описание первой строкой (до первого переноса строки или 150 символов)\n      let shortDescr = strBiographyEN ? strBiographyEN.split('\\n')[0] : '';\n      if (shortDescr.length > 150) shortDescr = shortDescr.slice(0, 147) + '...';\n\n      return `\n        <li class=\"artists-item\" style=\"max-width:472px; max-height:527px;\">\n          <div class=\"artists-box-img\">\n            <img\n              data-id=\"${_id}\"\n              src=\"${strArtistThumb || photo}\"\n              alt=\"${strArtist}\"\n              class=\"artists-img\"\n              loading=\"lazy\"\n              width=\"472\"\n              height=\"300\"\n            />\n          </div>\n          <div class=\"artists-box-genres\">${genresMarkup}</div>\n          <div class=\"artists-content\">\n            <h4 class=\"artists-name\">${strArtist}</h4>\n            <p class=\"artists-descr\">${shortDescr}</p>\n            <button type=\"button\" class=\"artists-learn-more-btn\" aria-label=\"Learn more about ${strArtist}\">\n              Learn More\n              <svg class=\"icon-caret-right\" width=\"24\" height=\"24\">\n                <use href=\"/artists-hub/assets/sprite-c2qr3u0C.svg#icon-caret-right\"></use>\n              </svg>\n            </button>\n          </div>\n        </li>\n      `;\n    })\n    .join('');\n}\n","import './css/styles.css';\nimport { getArtists } from './artist-api.js';\nimport { createArtistsMarkup } from './create.js';\n\nconst list = document.querySelector('.artists-list');\nconst pagination = document.querySelector('.pagination');\nconst searchInput = document.querySelector('#search-input');\n\nconst modal = document.getElementById('modal');\nconst modalCloseBtn = document.getElementById('modal-close');\nconst modalArtistName = document.getElementById('modal-artist-name');\nconst modalArtistBio = document.getElementById('modal-artist-bio');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\n\nlet debounceTimeout;\nsearchInput.addEventListener('input', e => {\n  clearTimeout(debounceTimeout);\n  debounceTimeout = setTimeout(() => {\n    currentQuery = e.target.value.trim();\n    currentPage = 1;\n    loadArtists(currentPage, currentQuery);\n  }, 300);\n});\n\nasync function loadArtists(page, query = '') {\n  try {\n    const { artists, totalArtists } = await getArtists(page, query);\n    list.innerHTML = createArtistsMarkup(artists);\n\n \n    document.querySelectorAll('.artists-learn-more-btn').forEach((button, index) => {\n      button.addEventListener('click', () => {\n        const artist = artists[index];\n        modalArtistName.textContent = artist.strArtist;\n        modalArtistBio.textContent = artist.strBiographyEN || 'No biography available.';\n        modal.classList.remove('hidden');\n      });\n    });\n\n    const totalPages = Math.ceil(totalArtists / 8);\n    renderPagination(totalPages, page);\n  } catch (err) {\n    list.innerHTML = `<li>Ошибка загрузки данных</li>`;\n  }\n}\n\nfunction renderPagination(totalPages, current) {\n  pagination.innerHTML = '';\n  if (totalPages <= 1) return;\n\n  const addButton = (label, page, isActive = false, isDisabled = false) => {\n    const btn = document.createElement('button');\n    btn.textContent = label;\n    if (isActive) btn.classList.add('active');\n    if (isDisabled) btn.disabled = true;\n    btn.addEventListener('click', () => {\n      if (page < 1 || page > totalPages) return;\n      currentPage = page;\n      loadArtists(currentPage, currentQuery);\n    });\n    pagination.appendChild(btn);\n  };\n\n  addButton('←', current - 1, false, current === 1);\n\n  if (totalPages <= 5) {\n    for (let i = 1; i <= totalPages; i++) {\n      addButton(i, i, i === current);\n    }\n  } else {\n    if (current <= 3) {\n      for (let i = 1; i <= 4; i++) addButton(i, i, i === current);\n      pagination.appendChild(document.createTextNode('...'));\n      addButton(totalPages, totalPages, false);\n    } else if (current >= totalPages - 2) {\n      addButton(1, 1, false);\n      pagination.appendChild(document.createTextNode('...'));\n      for (let i = totalPages - 3; i <= totalPages; i++) {\n        addButton(i, i, i === current);\n      }\n    } else {\n      addButton(1, 1, false);\n      pagination.appendChild(document.createTextNode('...'));\n      addButton(current - 1, current - 1);\n      addButton(current, current, true);\n      addButton(current + 1, current + 1);\n      pagination.appendChild(document.createTextNode('...'));\n      addButton(totalPages, totalPages);\n    }\n  }\n\n  addButton('→', current + 1, false, current === totalPages);\n}\n\n\nmodalCloseBtn.addEventListener('click', () => {\n  modal.classList.add('hidden');\n});\n\n\nmodal.addEventListener('click', (e) => {\n  if (e.target === modal) {\n    modal.classList.add('hidden');\n  }\n});\n\n\nloadArtists(currentPage);\n"],"names":["imagesOnPage","getArtists","page","name","BASE_URL","params","axios","error","iziToast","photo","createArtistsMarkup","arr","strArtist","strBiographyEN","strArtistThumb","_id","genres","flattenedGenres","genre","g","genresMarkup","shortDescr","list","pagination","searchInput","modal","modalCloseBtn","modalArtistName","modalArtistBio","currentPage","currentQuery","debounceTimeout","e","loadArtists","query","artists","totalArtists","button","index","artist","totalPages","renderPagination","current","addButton","label","isActive","isDisabled","btn","i"],"mappings":"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"}